#!/bin/bash
#
#	busca novedades y las descarga en una carpeta
#

# comprobar si hay red

# carpeta para el cache
mkdir ~/.cache/imdb/ 2> /dev/null
# directorio de videos
VIDEO="$(xdg-user-dir VIDEOS)/Películas"
# como se ve
PROGRAMA="torrent-buscar-carpeta-gtk"
# como se bucan mas
BUSCAR="torrent-buscar-carpeta"

# &languages=es
# https://github.com/tarzasai/.flexget/blob/master/config.yml


#genero
echo "action	Acción
adventure	Aventura
animation	Animación
biography	Biografía
comedy	Comedía
thriller	Triler
crime	Crimen
documentary	Documental
drama	Drama
fantasy	Fantasia
romance	Romantica
film_noir	Policial
history	Historía
horror	Horror
musical	Músical
mystery	Misterio
sci_fi	Ciencia Ficción
war	Belica
western	Oeste
music	Música
news	Noticias
game_show	Espectaculo
sport	Deportes
family	Familiar
talk_show	Entrevistas" | while read G; do

        DIR="$(echo "$G" | sed 's/^.*\t//g')"
        mkdir -p "$VIDEO/$DIR" 2> /dev/null
        GENERO="$(echo "$G" | sed 's/\t.*$//g')"

	echo $GENERO > /dev/stderr

echo "[Desktop Entry]
Version=1.0
Name=. Buscar
Comment=Buscar más peliculas
TryExec=$PROGRAMA
Exec=$PROGRAMA $GENERO
Icon=gtk-find
StartupNotify=true
Type=Application" > $VIDEO/$DIR/buscar.desktop

# genera el genero que le pidan
torrent-buscar-carpeta $GENERO "" "$VIDEO/$DIR/"

done

# mejora las imagenes, con menoscolores y sin areas blancas
mogrify -trim -colors 128 ~/.cache/imdb/*

exit

Quehaceres
==========

* comprobar si hay red



